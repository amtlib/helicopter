var scene = new THREE.Scene();
document.addEventListener('DOMContentLoaded', function () {

    var level = ('{"0":38,"1":37,"2":37,"3":39,"4":38,"5":36,"6":36,"7":37,"8":35,"9":35,"10":36,"11":38,"12":37,"13":40,"14":41,"15":39,"16":40,"17":41,"18":42,"19":40,"20":37,"21":36,"22":35,"23":32,"24":29,"25":26,"26":27,"27":28,"28":30,"29":30,"30":30,"31":27,"32":28,"33":29,"34":28,"35":28,"36":29,"37":30,"38":29,"39":26,"40":22,"41":19,"42":19,"43":16,"44":19,"45":20,"46":22,"47":22,"48":23,"49":25,"50":42,"51":41,"52":41,"53":42,"54":42,"55":40,"56":39,"57":39,"58":38,"59":38,"60":39,"61":40,"62":39,"63":40,"64":41,"65":42,"66":42,"67":45,"68":44,"69":44,"70":42,"71":40,"72":37,"73":34,"74":31,"75":28,"76":26,"77":29,"78":30,"79":31,"80":29,"81":29,"82":29,"83":30,"84":29,"85":29,"86":29,"87":30,"88":28,"89":25,"90":24,"91":23,"92":22,"93":18,"94":19,"95":22,"96":22,"97":24,"98":25,"99":26,"100":44,"101":44,"102":43,"103":47,"104":47,"105":45,"106":42,"107":40,"108":40,"109":38,"110":39,"111":41,"112":42,"113":42,"114":42,"115":43,"116":44,"117":45,"118":45,"119":44,"120":43,"121":42,"122":39,"123":36,"124":32,"125":29,"126":26,"127":27,"128":30,"129":30,"130":30,"131":30,"132":30,"133":31,"134":31,"135":29,"136":28,"137":30,"138":27,"139":27,"140":27,"141":27,"142":25,"143":22,"144":18,"145":20,"146":23,"147":24,"148":26,"149":28,"150":46,"151":46,"152":47,"153":49,"154":49,"155":47,"156":45,"157":42,"158":41,"159":40,"160":40,"161":42,"162":42,"163":43,"164":45,"165":47,"166":47,"167":49,"168":48,"169":45,"170":44,"171":43,"172":41,"173":38,"174":35,"175":32,"176":29,"177":27,"178":29,"179":31,"180":31,"181":31,"182":31,"183":30,"184":31,"185":30,"186":30,"187":29,"188":28,"189":29,"190":29,"191":29,"192":27,"193":25,"194":22,"195":21,"196":23,"197":24,"198":28,"199":30,"200":48,"201":48,"202":48,"203":49,"204":50,"205":48,"206":45,"207":44,"208":42,"209":40,"210":39,"211":42,"212":44,"213":45,"214":47,"215":50,"216":53,"217":54,"218":53,"219":51,"220":47,"221":45,"222":43,"223":41,"224":38,"225":36,"226":33,"227":29,"228":27,"229":28,"230":30,"231":29,"232":31,"233":30,"234":30,"235":30,"236":30,"237":30,"238":30,"239":29,"240":29,"241":28,"242":27,"243":25,"244":24,"245":23,"246":24,"247":24,"248":27,"249":29,"250":49,"251":51,"252":51,"253":50,"254":49,"255":48,"256":49,"257":49,"258":45,"259":43,"260":43,"261":44,"262":47,"263":47,"264":50,"265":52,"266":55,"267":56,"268":57,"269":53,"270":50,"271":48,"272":47,"273":44,"274":42,"275":40,"276":38,"277":34,"278":29,"279":27,"280":27,"281":28,"282":29,"283":29,"284":30,"285":31,"286":30,"287":30,"288":31,"289":32,"290":28,"291":27,"292":26,"293":26,"294":24,"295":23,"296":23,"297":24,"298":25,"299":27,"300":51,"301":54,"302":54,"303":54,"304":52,"305":52,"306":52,"307":50,"308":48,"309":45,"310":45,"311":48,"312":50,"313":50,"314":51,"315":55,"316":56,"317":58,"318":57,"319":55,"320":53,"321":52,"322":50,"323":47,"324":46,"325":44,"326":42,"327":38,"328":34,"329":29,"330":26,"331":27,"332":27,"333":30,"334":31,"335":31,"336":32,"337":30,"338":32,"339":32,"340":31,"341":29,"342":26,"343":25,"344":23,"345":21,"346":22,"347":24,"348":26,"349":27,"350":54,"351":55,"352":56,"353":55,"354":55,"355":54,"356":54,"357":52,"358":50,"359":46,"360":47,"361":49,"362":52,"363":53,"364":54,"365":55,"366":57,"367":59,"368":58,"369":57,"370":55,"371":54,"372":53,"373":52,"374":52,"375":49,"376":45,"377":42,"378":39,"379":34,"380":30,"381":27,"382":27,"383":31,"384":33,"385":34,"386":34,"387":31,"388":32,"389":33,"390":33,"391":32,"392":30,"393":28,"394":26,"395":23,"396":22,"397":23,"398":25,"399":28,"400":55,"401":57,"402":58,"403":55,"404":54,"405":54,"406":53,"407":54,"408":51,"409":49,"410":50,"411":52,"412":53,"413":54,"414":56,"415":57,"416":59,"417":59,"418":60,"419":59,"420":59,"421":59,"422":58,"423":57,"424":55,"425":51,"426":48,"427":44,"428":41,"429":38,"430":33,"431":28,"432":27,"433":32,"434":33,"435":33,"436":35,"437":32,"438":30,"439":32,"440":32,"441":32,"442":32,"443":30,"444":27,"445":24,"446":21,"447":21,"448":23,"449":26,"450":54,"451":56,"452":56,"453":55,"454":53,"455":52,"456":51,"457":51,"458":51,"459":49,"460":51,"461":51,"462":53,"463":55,"464":58,"465":60,"466":61,"467":62,"468":62,"469":62,"470":63,"471":64,"472":63,"473":59,"474":56,"475":51,"476":48,"477":45,"478":44,"479":41,"480":35,"481":31,"482":27,"483":30,"484":32,"485":32,"486":33,"487":32,"488":29,"489":30,"490":30,"491":30,"492":30,"493":29,"494":25,"495":21,"496":19,"497":21,"498":22,"499":24,"500":53,"501":56,"502":56,"503":53,"504":54,"505":54,"506":52,"507":50,"508":50,"509":51,"510":51,"511":53,"512":55,"513":59,"514":60,"515":63,"516":63,"517":65,"518":64,"519":65,"520":65,"521":66,"522":65,"523":62,"524":56,"525":52,"526":50,"527":47,"528":45,"529":43,"530":38,"531":33,"532":29,"533":29,"534":30,"535":30,"536":30,"537":31,"538":30,"539":29,"540":28,"541":29,"542":29,"543":27,"544":24,"545":21,"546":21,"547":19,"548":20,"549":23,"550":53,"551":56,"552":55,"553":53,"554":54,"555":55,"556":53,"557":49,"558":50,"559":52,"560":53,"561":55,"562":57,"563":61,"564":65,"565":66,"566":68,"567":67,"568":65,"569":66,"570":67,"571":66,"572":66,"573":61,"574":57,"575":55,"576":54,"577":49,"578":47,"579":46,"580":40,"581":35,"582":30,"583":28,"584":28,"585":29,"586":29,"587":30,"588":31,"589":29,"590":28,"591":28,"592":27,"593":25,"594":22,"595":22,"596":21,"597":19,"598":19,"599":23,"600":53,"601":56,"602":55,"603":52,"604":54,"605":55,"606":54,"607":50,"608":51,"609":53,"610":56,"611":55,"612":59,"613":63,"614":67,"615":68,"616":69,"617":68,"618":67,"619":67,"620":66,"621":66,"622":64,"623":61,"624":60,"625":59,"626":56,"627":51,"628":47,"629":46,"630":42,"631":39,"632":32,"633":27,"634":27,"635":28,"636":28,"637":29,"638":28,"639":28,"640":26,"641":26,"642":25,"643":22,"644":22,"645":21,"646":20,"647":18,"648":17,"649":19,"650":52,"651":54,"652":54,"653":52,"654":53,"655":52,"656":52,"657":50,"658":52,"659":54,"660":55,"661":56,"662":60,"663":63,"664":66,"665":67,"666":69,"667":68,"668":68,"669":68,"670":67,"671":65,"672":65,"673":64,"674":63,"675":60,"676":57,"677":52,"678":47,"679":46,"680":43,"681":40,"682":36,"683":29,"684":28,"685":28,"686":28,"687":28,"688":28,"689":27,"690":26,"691":27,"692":25,"693":23,"694":20,"695":19,"696":18,"697":17,"698":17,"699":18,"700":53,"701":53,"702":53,"703":51,"704":52,"705":52,"706":51,"707":51,"708":52,"709":54,"710":57,"711":58,"712":61,"713":62,"714":64,"715":65,"716":67,"717":68,"718":69,"719":68,"720":67,"721":66,"722":65,"723":65,"724":62,"725":59,"726":55,"727":51,"728":48,"729":45,"730":42,"731":40,"732":36,"733":31,"734":29,"735":28,"736":29,"737":28,"738":29,"739":27,"740":26,"741":26,"742":24,"743":22,"744":20,"745":17,"746":15,"747":14,"748":15,"749":17,"750":54,"751":53,"752":51,"753":51,"754":52,"755":53,"756":53,"757":53,"758":56,"759":57,"760":59,"761":60,"762":61,"763":63,"764":66,"765":68,"766":69,"767":69,"768":68,"769":69,"770":69,"771":67,"772":64,"773":63,"774":61,"775":57,"776":54,"777":51,"778":49,"779":45,"780":41,"781":38,"782":36,"783":32,"784":31,"785":31,"786":29,"787":28,"788":28,"789":28,"790":25,"791":23,"792":24,"793":22,"794":20,"795":17,"796":14,"797":11,"798":11,"799":14,"800":55,"801":53,"802":53,"803":54,"804":55,"805":55,"806":55,"807":56,"808":58,"809":58,"810":60,"811":62,"812":63,"813":63,"814":66,"815":69,"816":70,"817":68,"818":68,"819":71,"820":70,"821":68,"822":65,"823":61,"824":59,"825":57,"826":55,"827":50,"828":49,"829":47,"830":43,"831":37,"832":34,"833":33,"834":33,"835":33,"836":31,"837":29,"838":30,"839":29,"840":27,"841":24,"842":22,"843":21,"844":19,"845":17,"846":14,"847":10,"848":9,"849":11,"850":59,"851":56,"852":55,"853":56,"854":56,"855":57,"856":57,"857":57,"858":57,"859":58,"860":59,"861":61,"862":62,"863":64,"864":67,"865":68,"866":69,"867":68,"868":68,"869":69,"870":70,"871":69,"872":65,"873":62,"874":59,"875":58,"876":55,"877":51,"878":48,"879":47,"880":42,"881":38,"882":34,"883":35,"884":35,"885":35,"886":33,"887":29,"888":31,"889":31,"890":29,"891":26,"892":22,"893":19,"894":17,"895":15,"896":13,"897":9,"898":8,"899":10,"900":61,"901":59,"902":56,"903":54,"904":57,"905":57,"906":58,"907":58,"908":56,"909":56,"910":58,"911":60,"912":61,"913":62,"914":64,"915":67,"916":66,"917":65,"918":67,"919":67,"920":66,"921":65,"922":62,"923":59,"924":57,"925":56,"926":54,"927":49,"928":47,"929":45,"930":42,"931":36,"932":35,"933":38,"934":37,"935":36,"936":34,"937":30,"938":32,"939":31,"940":29,"941":26,"942":23,"943":20,"944":17,"945":13,"946":11,"947":10,"948":9,"949":11,"950":61,"951":57,"952":58,"953":56,"954":55,"955":56,"956":57,"957":57,"958":56,"959":58,"960":58,"961":58,"962":61,"963":61,"964":63,"965":63,"966":64,"967":64,"968":64,"969":64,"970":63,"971":61,"972":61,"973":59,"974":55,"975":54,"976":51,"977":48,"978":43,"979":42,"980":38,"981":37,"982":38,"983":39,"984":37,"985":35,"986":32,"987":32,"988":31,"989":30,"990":28,"991":25,"992":23,"993":21,"994":18,"995":14,"996":10,"997":9,"998":8,"999":11,"1000":60,"1001":58,"1002":58,"1003":57,"1004":55,"1005":57,"1006":58,"1007":57,"1008":55,"1009":56,"1010":57,"1011":59,"1012":61,"1013":62,"1014":63,"1015":64,"1016":64,"1017":64,"1018":63,"1019":63,"1020":63,"1021":62,"1022":61,"1023":59,"1024":55,"1025":50,"1026":48,"1027":44,"1028":42,"1029":39,"1030":39,"1031":41,"1032":41,"1033":41,"1034":38,"1035":36,"1036":36,"1037":35,"1038":33,"1039":29,"1040":27,"1041":25,"1042":23,"1043":20,"1044":16,"1045":13,"1046":10,"1047":8,"1048":7,"1049":9,"1050":59,"1051":59,"1052":60,"1053":57,"1054":55,"1055":56,"1056":58,"1057":59,"1058":56,"1059":56,"1060":56,"1061":57,"1062":59,"1063":61,"1064":62,"1065":62,"1066":63,"1067":62,"1068":61,"1069":63,"1070":63,"1071":61,"1072":60,"1073":59,"1074":55,"1075":51,"1076":46,"1077":43,"1078":41,"1079":42,"1080":43,"1081":44,"1082":45,"1083":42,"1084":39,"1085":39,"1086":38,"1087":36,"1088":33,"1089":30,"1090":27,"1091":24,"1092":23,"1093":20,"1094":16,"1095":14,"1096":12,"1097":9,"1098":6,"1099":8,"1100":60,"1101":59,"1102":59,"1103":57,"1104":58,"1105":57,"1106":58,"1107":58,"1108":58,"1109":58,"1110":56,"1111":56,"1112":57,"1113":58,"1114":58,"1115":59,"1116":59,"1117":60,"1118":61,"1119":62,"1120":60,"1121":60,"1122":58,"1123":56,"1124":54,"1125":50,"1126":47,"1127":46,"1128":45,"1129":44,"1130":46,"1131":47,"1132":45,"1133":42,"1134":43,"1135":42,"1136":40,"1137":37,"1138":34,"1139":31,"1140":29,"1141":25,"1142":24,"1143":22,"1144":16,"1145":14,"1146":12,"1147":10,"1148":8,"1149":10,"1150":60,"1151":58,"1152":56,"1153":57,"1154":59,"1155":60,"1156":60,"1157":61,"1158":61,"1159":61,"1160":60,"1161":59,"1162":57,"1163":57,"1164":57,"1165":58,"1166":60,"1167":60,"1168":59,"1169":60,"1170":58,"1171":57,"1172":55,"1173":53,"1174":52,"1175":49,"1176":50,"1177":51,"1178":49,"1179":47,"1180":46,"1181":46,"1182":45,"1183":46,"1184":47,"1185":46,"1186":42,"1187":38,"1188":35,"1189":32,"1190":30,"1191":28,"1192":27,"1193":25,"1194":19,"1195":16,"1196":11,"1197":10,"1198":10,"1199":12,"1200":58,"1201":56,"1202":56,"1203":60,"1204":60,"1205":61,"1206":63,"1207":65,"1208":65,"1209":64,"1210":64,"1211":62,"1212":61,"1213":60,"1214":59,"1215":59,"1216":59,"1217":58,"1218":58,"1219":56,"1220":55,"1221":53,"1222":51,"1223":49,"1224":49,"1225":52,"1226":52,"1227":54,"1228":53,"1229":52,"1230":50,"1231":48,"1232":48,"1233":49,"1234":48,"1235":45,"1236":42,"1237":38,"1238":37,"1239":34,"1240":31,"1241":30,"1242":29,"1243":26,"1244":21,"1245":18,"1246":13,"1247":11,"1248":10,"1249":12,"1250":57,"1251":56,"1252":60,"1253":62,"1254":62,"1255":62,"1256":65,"1257":66,"1258":66,"1259":65,"1260":64,"1261":64,"1262":61,"1263":59,"1264":58,"1265":57,"1266":57,"1267":55,"1268":55,"1269":55,"1270":55,"1271":53,"1272":52,"1273":50,"1274":51,"1275":53,"1276":54,"1277":56,"1278":55,"1279":55,"1280":52,"1281":50,"1282":50,"1283":50,"1284":49,"1285":45,"1286":43,"1287":43,"1288":40,"1289":36,"1290":33,"1291":30,"1292":29,"1293":26,"1294":22,"1295":17,"1296":14,"1297":13,"1298":12,"1299":13,"1300":57,"1301":58,"1302":63,"1303":65,"1304":65,"1305":65,"1306":65,"1307":66,"1308":65,"1309":65,"1310":64,"1311":63,"1312":62,"1313":60,"1314":59,"1315":58,"1316":56,"1317":55,"1318":55,"1319":55,"1320":54,"1321":53,"1322":53,"1323":52,"1324":52,"1325":54,"1326":56,"1327":57,"1328":58,"1329":55,"1330":54,"1331":53,"1332":52,"1333":50,"1334":48,"1335":48,"1336":47,"1337":47,"1338":43,"1339":39,"1340":35,"1341":30,"1342":29,"1343":26,"1344":21,"1345":20,"1346":17,"1347":15,"1348":12,"1349":14,"1350":58,"1351":60,"1352":64,"1353":67,"1354":68,"1355":69,"1356":69,"1357":69,"1358":68,"1359":68,"1360":67,"1361":67,"1362":66,"1363":65,"1364":63,"1365":61,"1366":59,"1367":57,"1368":56,"1369":55,"1370":54,"1371":54,"1372":54,"1373":55,"1374":55,"1375":54,"1376":56,"1377":57,"1378":58,"1379":56,"1380":54,"1381":54,"1382":53,"1383":51,"1384":51,"1385":51,"1386":50,"1387":49,"1388":46,"1389":41,"1390":38,"1391":34,"1392":30,"1393":26,"1394":25,"1395":22,"1396":21,"1397":15,"1398":12,"1399":17,"1400":61,"1401":62,"1402":63,"1403":67,"1404":69,"1405":71,"1406":72,"1407":72,"1408":71,"1409":71,"1410":70,"1411":70,"1412":70,"1413":68,"1414":66,"1415":64,"1416":60,"1417":59,"1418":59,"1419":58,"1420":57,"1421":56,"1422":55,"1423":57,"1424":59,"1425":58,"1426":57,"1427":57,"1428":58,"1429":57,"1430":55,"1431":55,"1432":54,"1433":53,"1434":53,"1435":52,"1436":52,"1437":49,"1438":45,"1439":42,"1440":39,"1441":36,"1442":34,"1443":30,"1444":27,"1445":24,"1446":22,"1447":16,"1448":15,"1449":20,"1450":62,"1451":63,"1452":66,"1453":68,"1454":69,"1455":71,"1456":73,"1457":73,"1458":73,"1459":72,"1460":72,"1461":72,"1462":71,"1463":70,"1464":67,"1465":63,"1466":62,"1467":62,"1468":63,"1469":62,"1470":61,"1471":59,"1472":57,"1473":59,"1474":61,"1475":60,"1476":58,"1477":58,"1478":59,"1479":59,"1480":58,"1481":57,"1482":58,"1483":56,"1484":53,"1485":53,"1486":51,"1487":49,"1488":45,"1489":42,"1490":38,"1491":37,"1492":35,"1493":31,"1494":28,"1495":24,"1496":20,"1497":16,"1498":17,"1499":21,"1500":63,"1501":65,"1502":70,"1503":71,"1504":71,"1505":71,"1506":73,"1507":73,"1508":73,"1509":73,"1510":73,"1511":73,"1512":73,"1513":71,"1514":68,"1515":65,"1516":66,"1517":65,"1518":64,"1519":63,"1520":62,"1521":60,"1522":59,"1523":60,"1524":62,"1525":60,"1526":59,"1527":62,"1528":62,"1529":63,"1530":61,"1531":61,"1532":60,"1533":59,"1534":57,"1535":52,"1536":50,"1537":48,"1538":46,"1539":44,"1540":39,"1541":37,"1542":34,"1543":31,"1544":27,"1545":24,"1546":21,"1547":17,"1548":18,"1549":22,"1550":65,"1551":69,"1552":72,"1553":75,"1554":74,"1555":73,"1556":74,"1557":74,"1558":74,"1559":74,"1560":74,"1561":74,"1562":74,"1563":72,"1564":68,"1565":69,"1566":69,"1567":68,"1568":64,"1569":63,"1570":62,"1571":61,"1572":61,"1573":61,"1574":61,"1575":62,"1576":63,"1577":66,"1578":65,"1579":65,"1580":65,"1581":64,"1582":64,"1583":62,"1584":59,"1585":56,"1586":53,"1587":51,"1588":49,"1589":46,"1590":42,"1591":37,"1592":34,"1593":31,"1594":28,"1595":24,"1596":21,"1597":18,"1598":20,"1599":23,"1600":68,"1601":71,"1602":74,"1603":76,"1604":76,"1605":75,"1606":75,"1607":75,"1608":75,"1609":76,"1610":75,"1611":74,"1612":72,"1613":71,"1614":71,"1615":71,"1616":70,"1617":69,"1618":65,"1619":66,"1620":65,"1621":64,"1622":63,"1623":64,"1624":64,"1625":65,"1626":67,"1627":66,"1628":67,"1629":65,"1630":65,"1631":65,"1632":64,"1633":63,"1634":61,"1635":59,"1636":56,"1637":53,"1638":50,"1639":46,"1640":43,"1641":39,"1642":36,"1643":33,"1644":31,"1645":28,"1646":24,"1647":20,"1648":21,"1649":25,"1650":68,"1651":71,"1652":74,"1653":75,"1654":76,"1655":75,"1656":76,"1657":78,"1658":77,"1659":77,"1660":78,"1661":77,"1662":76,"1663":74,"1664":73,"1665":71,"1666":70,"1667":67,"1668":68,"1669":68,"1670":67,"1671":64,"1672":65,"1673":65,"1674":67,"1675":68,"1676":67,"1677":66,"1678":67,"1679":65,"1680":64,"1681":63,"1682":63,"1683":62,"1684":61,"1685":60,"1686":57,"1687":55,"1688":50,"1689":47,"1690":44,"1691":41,"1692":36,"1693":35,"1694":33,"1695":31,"1696":26,"1697":22,"1698":23,"1699":27,"1700":67,"1701":70,"1702":72,"1703":74,"1704":74,"1705":77,"1706":79,"1707":80,"1708":78,"1709":78,"1710":79,"1711":80,"1712":77,"1713":75,"1714":73,"1715":72,"1716":70,"1717":70,"1718":69,"1719":69,"1720":66,"1721":65,"1722":67,"1723":68,"1724":68,"1725":66,"1726":66,"1727":66,"1728":64,"1729":65,"1730":64,"1731":63,"1732":62,"1733":61,"1734":60,"1735":60,"1736":58,"1737":56,"1738":50,"1739":48,"1740":46,"1741":42,"1742":38,"1743":35,"1744":34,"1745":31,"1746":26,"1747":23,"1748":25,"1749":28,"1750":68,"1751":70,"1752":71,"1753":73,"1754":75,"1755":78,"1756":80,"1757":82,"1758":81,"1759":78,"1760":78,"1761":78,"1762":77,"1763":75,"1764":74,"1765":74,"1766":73,"1767":71,"1768":69,"1769":67,"1770":66,"1771":67,"1772":67,"1773":66,"1774":65,"1775":65,"1776":65,"1777":64,"1778":65,"1779":64,"1780":64,"1781":64,"1782":62,"1783":61,"1784":60,"1785":59,"1786":58,"1787":55,"1788":51,"1789":49,"1790":46,"1791":42,"1792":38,"1793":36,"1794":33,"1795":30,"1796":26,"1797":23,"1798":25,"1799":27,"1800":70,"1801":72,"1802":72,"1803":73,"1804":75,"1805":77,"1806":81,"1807":82,"1808":82,"1809":80,"1810":78,"1811":77,"1812":76,"1813":76,"1814":76,"1815":75,"1816":73,"1817":72,"1818":69,"1819":67,"1820":68,"1821":68,"1822":68,"1823":66,"1824":64,"1825":63,"1826":63,"1827":63,"1828":64,"1829":66,"1830":65,"1831":64,"1832":61,"1833":59,"1834":59,"1835":58,"1836":57,"1837":56,"1838":51,"1839":47,"1840":45,"1841":41,"1842":38,"1843":34,"1844":33,"1845":29,"1846":25,"1847":24,"1848":26,"1849":30,"1850":70,"1851":72,"1852":73,"1853":73,"1854":75,"1855":77,"1856":79,"1857":81,"1858":81,"1859":81,"1860":79,"1861":80,"1862":77,"1863":76,"1864":75,"1865":73,"1866":71,"1867":70,"1868":67,"1869":68,"1870":67,"1871":67,"1872":67,"1873":64,"1874":63,"1875":63,"1876":63,"1877":64,"1878":65,"1879":65,"1880":64,"1881":63,"1882":60,"1883":58,"1884":58,"1885":56,"1886":55,"1887":52,"1888":50,"1889":47,"1890":44,"1891":41,"1892":38,"1893":36,"1894":32,"1895":28,"1896":24,"1897":25,"1898":29,"1899":32,"1900":70,"1901":72,"1902":71,"1903":73,"1904":74,"1905":75,"1906":77,"1907":78,"1908":78,"1909":80,"1910":80,"1911":80,"1912":77,"1913":75,"1914":73,"1915":71,"1916":70,"1917":68,"1918":67,"1919":65,"1920":65,"1921":65,"1922":64,"1923":62,"1924":61,"1925":62,"1926":62,"1927":63,"1928":64,"1929":63,"1930":63,"1931":60,"1932":57,"1933":58,"1934":58,"1935":56,"1936":53,"1937":51,"1938":49,"1939":47,"1940":45,"1941":41,"1942":39,"1943":36,"1944":33,"1945":28,"1946":25,"1947":27,"1948":30,"1949":33,"1950":67,"1951":69,"1952":69,"1953":72,"1954":73,"1955":74,"1956":76,"1957":76,"1958":76,"1959":77,"1960":78,"1961":78,"1962":76,"1963":74,"1964":73,"1965":71,"1966":69,"1967":67,"1968":66,"1969":63,"1970":63,"1971":61,"1972":60,"1973":60,"1974":60,"1975":60,"1976":62,"1977":64,"1978":63,"1979":61,"1980":59,"1981":56,"1982":55,"1983":57,"1984":57,"1985":55,"1986":51,"1987":50,"1988":50,"1989":48,"1990":44,"1991":41,"1992":38,"1993":35,"1994":31,"1995":27,"1996":25,"1997":29,"1998":32,"1999":34,"2000":64,"2001":66,"2002":68,"2003":71,"2004":73,"2005":75,"2006":76,"2007":75,"2008":76,"2009":77,"2010":75,"2011":75,"2012":73,"2013":72,"2014":71,"2015":68,"2016":68,"2017":67,"2018":65,"2019":63,"2020":62,"2021":60,"2022":59,"2023":57,"2024":57,"2025":58,"2026":59,"2027":60,"2028":60,"2029":57,"2030":54,"2031":53,"2032":53,"2033":54,"2034":53,"2035":50,"2036":49,"2037":48,"2038":47,"2039":46,"2040":44,"2041":40,"2042":37,"2043":33,"2044":29,"2045":26,"2046":27,"2047":30,"2048":30,"2049":32,"2050":62,"2051":65,"2052":68,"2053":68,"2054":73,"2055":74,"2056":74,"2057":74,"2058":76,"2059":76,"2060":75,"2061":73,"2062":72,"2063":70,"2064":69,"2065":67,"2066":66,"2067":66,"2068":63,"2069":62,"2070":59,"2071":58,"2072":57,"2073":54,"2074":54,"2075":55,"2076":56,"2077":56,"2078":56,"2079":54,"2080":52,"2081":49,"2082":50,"2083":49,"2084":48,"2085":48,"2086":48,"2087":46,"2088":44,"2089":44,"2090":41,"2091":37,"2092":35,"2093":31,"2094":30,"2095":27,"2096":29,"2097":30,"2098":31,"2099":31,"2100":63,"2101":66,"2102":67,"2103":67,"2104":70,"2105":71,"2106":72,"2107":74,"2108":76,"2109":76,"2110":75,"2111":73,"2112":72,"2113":69,"2114":66,"2115":64,"2116":63,"2117":62,"2118":59,"2119":57,"2120":55,"2121":53,"2122":51,"2123":50,"2124":51,"2125":51,"2126":51,"2127":51,"2128":51,"2129":49,"2130":48,"2131":46,"2132":45,"2133":45,"2134":46,"2135":47,"2136":47,"2137":46,"2138":43,"2139":41,"2140":38,"2141":37,"2142":35,"2143":33,"2144":30,"2145":28,"2146":29,"2147":30,"2148":30,"2149":30,"2150":60,"2151":64,"2152":66,"2153":66,"2154":66,"2155":68,"2156":71,"2157":74,"2158":75,"2159":75,"2160":74,"2161":73,"2162":71,"2163":69,"2164":66,"2165":62,"2166":59,"2167":57,"2168":54,"2169":53,"2170":51,"2171":49,"2172":48,"2173":47,"2174":48,"2175":47,"2176":45,"2177":45,"2178":44,"2179":44,"2180":42,"2181":42,"2182":42,"2183":44,"2184":45,"2185":46,"2186":45,"2187":43,"2188":41,"2189":40,"2190":38,"2191":37,"2192":35,"2193":32,"2194":30,"2195":28,"2196":30,"2197":30,"2198":29,"2199":30,"2200":58,"2201":60,"2202":63,"2203":64,"2204":65,"2205":68,"2206":69,"2207":72,"2208":73,"2209":72,"2210":70,"2211":69,"2212":69,"2213":67,"2214":63,"2215":60,"2216":56,"2217":54,"2218":52,"2219":51,"2220":48,"2221":45,"2222":44,"2223":44,"2224":43,"2225":41,"2226":40,"2227":41,"2228":40,"2229":40,"2230":39,"2231":39,"2232":38,"2233":39,"2234":40,"2235":40,"2236":40,"2237":40,"2238":38,"2239":38,"2240":38,"2241":35,"2242":33,"2243":30,"2244":28,"2245":27,"2246":29,"2247":28,"2248":29,"2249":30,"2250":54,"2251":58,"2252":60,"2253":61,"2254":64,"2255":64,"2256":67,"2257":69,"2258":69,"2259":68,"2260":67,"2261":65,"2262":64,"2263":63,"2264":60,"2265":55,"2266":53,"2267":50,"2268":48,"2269":46,"2270":44,"2271":42,"2272":40,"2273":39,"2274":38,"2275":37,"2276":39,"2277":39,"2278":38,"2279":37,"2280":36,"2281":37,"2282":36,"2283":35,"2284":36,"2285":36,"2286":36,"2287":35,"2288":36,"2289":34,"2290":34,"2291":33,"2292":30,"2293":27,"2294":24,"2295":26,"2296":26,"2297":27,"2298":29,"2299":31,"2300":54,"2301":55,"2302":57,"2303":62,"2304":63,"2305":64,"2306":63,"2307":65,"2308":65,"2309":63,"2310":63,"2311":61,"2312":59,"2313":57,"2314":55,"2315":53,"2316":52,"2317":48,"2318":45,"2319":42,"2320":42,"2321":43,"2322":41,"2323":40,"2324":39,"2325":39,"2326":40,"2327":39,"2328":36,"2329":34,"2330":34,"2331":34,"2332":33,"2333":32,"2334":32,"2335":32,"2336":32,"2337":32,"2338":32,"2339":32,"2340":31,"2341":30,"2342":27,"2343":25,"2344":22,"2345":24,"2346":26,"2347":28,"2348":28,"2349":30,"2350":53,"2351":54,"2352":57,"2353":59,"2354":62,"2355":63,"2356":64,"2357":63,"2358":63,"2359":62,"2360":62,"2361":61,"2362":59,"2363":57,"2364":54,"2365":53,"2366":49,"2367":46,"2368":42,"2369":40,"2370":42,"2371":43,"2372":43,"2373":42,"2374":42,"2375":42,"2376":42,"2377":41,"2378":36,"2379":33,"2380":30,"2381":31,"2382":31,"2383":29,"2384":29,"2385":29,"2386":30,"2387":31,"2388":31,"2389":31,"2390":28,"2391":27,"2392":26,"2393":24,"2394":23,"2395":24,"2396":26,"2397":27,"2398":29,"2399":30,"2400":52,"2401":52,"2402":53,"2403":56,"2404":59,"2405":61,"2406":62,"2407":62,"2408":62,"2409":62,"2410":60,"2411":59,"2412":58,"2413":55,"2414":52,"2415":50,"2416":47,"2417":42,"2418":40,"2419":43,"2420":43,"2421":43,"2422":43,"2423":42,"2424":42,"2425":43,"2426":43,"2427":41,"2428":36,"2429":33,"2430":29,"2431":27,"2432":27,"2433":26,"2434":26,"2435":28,"2436":29,"2437":30,"2438":31,"2439":30,"2440":27,"2441":25,"2442":26,"2443":23,"2444":23,"2445":25,"2446":28,"2447":29,"2448":29,"2449":31,"2450":48,"2451":50,"2452":53,"2453":56,"2454":56,"2455":57,"2456":59,"2457":59,"2458":59,"2459":57,"2460":58,"2461":58,"2462":55,"2463":53,"2464":49,"2465":46,"2466":43,"2467":39,"2468":42,"2469":45,"2470":45,"2471":44,"2472":44,"2473":43,"2474":43,"2475":43,"2476":43,"2477":40,"2478":36,"2479":34,"2480":30,"2481":27,"2482":24,"2483":24,"2484":24,"2485":27,"2486":30,"2487":30,"2488":30,"2489":28,"2490":25,"2491":25,"2492":25,"2493":23,"2494":23,"2495":26,"2496":29,"2497":31,"2498":33,"2499":31}');




    var startscreen = new StartScreen();
    var helicopter = new Helicopter();
    var loadingscreen = new LoadingScreen();
    var helicopter_model;
    var camera_controller;
    var slider;

    document.addEventListener('keydown', function(e){
        if(camera_controller)
        camera_controller.set_camera_position(e.keyCode-49);
    })

    startscreen.show_screen(function () {
        loadingscreen.show_screen();
        helicopter.loadModel("models/Mi28.dae", startscreen.selected, function (modelData) {
            loadingscreen.hide_screen()
            slider = new Slider();
            slider.append_html();
            console.log("model jest załadowany")
            helicopter.getModel().scale.set(2, 2, 2)
            scene.add(helicopter.getModel())
            helicopter_model = helicopter.getModel();
            camera_controller = new CameraController()
            camera_controller.camera = camera;
            camera_controller.model = helicopter_model

        });
    });


    window.addEventListener("resize", function () {
        renderer.setSize(window.innerWidth, window.innerHeight)
    })

    var camera = new THREE.PerspectiveCamera(90, // kąt patrzenia kamery (FOV - field of view)
        window.innerWidth / window.innerHeight, // proporcje widoku, powinny odpowiadać proporjom naszego ekranu przeglądarki
        0.1, // minimalna renderowana odległość
        50000 // maxymalna renderowana odległość
    );
    var renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight)
    scene.add(camera)
    document.getElementById("content").appendChild(renderer.domElement);
    var teren = new Terrain(Settings.terrain_size, Settings.terrain_height, Settings.terrain_color, JSON.parse(level))
    teren.getTerrain().position.y = -1000
    scene.add(teren.getTerrain())
    var teren_siatka = teren.getTerrain().clone();
    console.log(teren_siatka)

    // var orbitControl = new THREE.OrbitControls(camera, renderer.domElement);
    // orbitControl.addEventListener('change', function () {
    //     renderer.render(scene, camera)
    // });




    var skybox = new SkyBox(6000);
    scene.add(skybox.get_mesh())

    scene.fog = new THREE.FogExp2('#000055', .0003); // drugi parametr "gęstość" trzeba dobrać eksperymentalnie

    console.log(startscreen.selected)

    function animateScene() {
        if (slider) {
            slider.update();
            helicopter_model.translateZ(slider.height * 10)
            helicopter_model.translateY(-slider.speed * 10)
            //helicopter_model.rotation.x = slider.speed*1.5 - Math.PI/2;

            helicopter_model.rotateZ((slider.turning) / 8)
        }

        if (helicopter) {
            helicopter.speed = .6;
            helicopter.updateModel()
        }
        if (camera_controller)
            camera_controller.update()
        camera.updateProjectionMatrix();
        requestAnimationFrame(animateScene);
        renderer.render(scene, camera);
    }
    animateScene();

})